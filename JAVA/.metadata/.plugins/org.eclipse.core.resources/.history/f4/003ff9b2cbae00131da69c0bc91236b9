package cs22510_2014;

import java.io.FileNotFoundException;
import java.io.PrintWriter;

public class Main {

	public static void main(String[] args) {

		String file1 = "/home/evdjoint/gps_1.dat";
		String file2 = "/home/evdjoint/gps_2.dat";

		Controller controller = new Controller(file1, file2);

		PrintWriter pw = null;
		try {
			controller.start();
			pw = new PrintWriter("data.gpx");

			pw.write("<?xml version=\"1.0\"?>\n" + 
					"<gpx\n" + 
					" version=\"1.0\"\n" + 
					" creator=\"ExpertGPS 1.1 - http://www.topografix.com\"\n" + 
					" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n" + 
					" xmlns=\"http://www.topografix.com/GPX/1/0\"\n" + 
					" xsi:schemaLocation=\"http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd\">");
			

			for (Location l : controller.locations) {
				pw.write("<wpt lat=\""+l.latitude+"\" lon=\"-"+l.longitude+"\"> <ele></ele>\n" + 
						" <time></time>\n" + 
						" <name></name>\n" + 
						" <desc></desc>\n" + 
						" <sym></sym>\n" + 
						" <type></type>\n" + 
						"</wpt>");
			}

			pw.write("</rtept>\n" + 
					"</rte>\n" + 
					"</gpx>");

		} catch (FileNotFoundException e) {

			e.printStackTrace();
		}
		pw.close();

	}

}
