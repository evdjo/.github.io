package cs22510_2014;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
 

public class Model {
	
	 
	 private final static String GGA = "$GPGGA";
	 private final static String GSA = "$GPGSA";
	 private final static String GSV = "$GPGSV";
	 private final static String RMC = "$GPRMC";
	  
	 
	 
	 private List<String> thelist ;
	 private BufferedReader br;
	 
	 public Model() {
		 thelist = new ArrayList<String>();
		try {
			
			 br = new BufferedReader(new FileReader("/home/evdjoint/gps_1.dat"));
			 printSomething();
		} catch (IOException e) {
			 e.printStackTrace();
		}
		  
	 }
	 
	 public boolean getNextCoordinates(Location l) {
		 String x;
			try { 
				while(( x = br.readLine()) != null ) {
				
		   
	                 if(x.substring(3, 6).equals("GGA")) {
	                	 thelist.add(x.substring(39,40));
	                 }
			
			  	
				}
			} catch (Exception e ) { }
		 
		 return false;
	 }
	 public void printSomething()  {
		 int i=0;
		 String x;
		try { 
			while(( x = br.readLine()) != null ) {
			
				 
                 if(x.substring(0, 6).equals(RMC)) {
                	i++;
                 }
		
		  	
			}
		} catch (Exception e ) { }
	     System.out.println(i);
		
	 }
	 public String getCoordinate(String theLine) {
		        if( theLine.substring( 3, 6 ).equals( "RMC" )) {
		        	
			 return theLine.substring(20, 44);
			 
		 } else if( theLine.substring( 3, 6 ).equals( "GGA" )) {
			 
			 return theLine.substring(18, 42);
			 
		 } else {
			 
			 return theLine;
		 }
		 
	 }
	 public boolean sateliteIsOk(String GGA) {
		 
		 return false;
	 }

}
